## 양자화 간격 관련 이슈

<br>

### 사건의 발단 🤷‍♀️

아래의 이유로 데이터 양자화를 시도하던 상황이었습니다.  

- Kuler에서 활용되는 색채들 중 서로 비슷한 색들을 근사하여 분석하기 위함  
- 더불어 색차 표본간의 거리를 사람이 인식하는 색차와 균등하게 보정하기 위해 색차를 보정함   

첫번째 시도로 간격을 5로 설정하여 진행하였습니다 (레퍼런스 : <네트워크 분석을 통한 크라우드소싱 배색 데이터 연구> 논문)  

<br>

<br>

### 문제 📌

그런데 간격 5로 양자화 된 색이 원본과 비교하여 차이가 과도했습니다. 따라서 간격의 조정이 필요하다고 판단했습니다.  

<br>

<br>

### 해결 방법 ✔️

#### 간격 조정 시도 💬

[인지적으로 균등한 색채 이론](http://cs.haifa.ac.il/hagit/courses/ist/Lectures/IST05_ColorLAB.pdf)을 참고하여 dE(색 공간 내 기하학적 거리를 의미)의 값을 5 정도로 갖는 값이 적당하다고 판단하였습니다. 이 값을 결정하는 변수인 dL, da, db 의 값을 추산한 결과로, 최종 양자화 간격으로 3을 결정하였습니다. 간격을 3으로 결정한 근거는 다음과 같습니다.  

먼저 dE를 계산하는 식은 다음과 같습니다.  

```
dE = (dL^2 + da^2 + db^2)^1/2
```

따라서 (3^2 + 3^2 + 3^2)^1/2 = 5.xx의 결과를 갖도록 델타 값을, 즉 양자화 간격을 3으로 결정했습니다.  

상세한 코드는 다음과 같습니다. 양자화 함수를 다음과 같이 정의했습니다.  

```python
# 양자화 함수

def quant(x):
    if x % 3 == 0:
        return int(x)
    else:
        return int(int((x + 3) / 3) * 3)

```

<br>

<br>

### 검증 📐

조정한 양자화 간격에 대한 검증 단계를 거쳤습니다.  

먼저 양자화 후 dEh 값을 역으로 계산하여 양자화한 값의 신뢰도를 검증했습니다. 결과로 dEh 값은 평균 0.591941, 분산은 0.910121의 값을 얻었습니다. 안정적인 평균과 분산 값으로, 데이터의 신뢰도를 검증할 수 있었습니다.  

그리고 양자화 한 데이터의 색을 추출하여 원본과 시각적으로 비교하는 방식의 검증 또한 거쳤습니다.  

<br>

<br>